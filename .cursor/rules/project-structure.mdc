---
alwaysApply: true
---
# Project Structure & Workflow Rules

This document defines the project structure, technical stack, and development workflows for the SplitSmart application. It serves as a living guide for maintaining code consistency and quality.

## 1. Technical Stack

- **Framework**: [Expo](https://expo.dev/) (Managed Workflow)
- **Core**: React Native & TypeScript
- **UI Components**: [HeroUI Native](https://heroui.com/native)
- **Styling**: [Uniwind](https://uniwind.dev/) (Tailwind CSS for React Native)
- **Navigation**: [Expo Router](https://docs.expo.dev/router/introduction/)
- **State Management**: React Props/State (Local), Context/Zustand (Global if needed), React Query (Server Types)
- **Package Manager**: [Bun](https://bun.sh/)

## 2. Directory Structure

```text
/
├── .agent/                  # AI Agent rules & memory
├── app/                     # Expo Router (Filesystem-based navigation)
│   ├── (tabs)/              # Main tab-based screens
│   ├── (modal)/             # Modal screens (Stack presentation)
│   ├── group/[id]/          # Dynamic routes
│   └── _layout.tsx          # Root layout config
├── components/              # Shared React components
│   ├── ui/                  # Atomic UI components (HeroUI based)
│   └── ...                  # Feature-specific components
├── constants/               # App constants (Colors, Config)
├── src/                     # Core configuration
│   ├── uniwind.d.ts         # Type definitions (e.g., className)
│   └── ...
├── assets/                  # Static assets (Images, Fonts)
├── global.css               # Global styling & design tokens
```

## 3. UI & Theming System

### Design Patterns
- **Premium Aesthetics**: Use refined styling, shadows, and spacing.
- **HeroUI Anatomy**: Strictly follow component anatomy (e.g., `Card.Header`, `Card.Body`).
- **Feedback**: Use `PressableFeedback` for all interactive elements.

### Theming (`global.css`)
- Use CSS variables for colors to support Dark/Light modes:
  - `--background`: Main background
  - `--surface`: Card/Section background
  - `--accent`: Primary interaction color
  - `--danger`/`--success`: Status colors
- **Typography**: Use standard font weights and sizes defined in the design system.

## 4. Coding Standards

Refer to `code-style-guide.md` for detailed coding rules. Key highlights:
- **Immutability**: Prefer `const`, avoid mutation.
- **Early Return**: Simplify logic flow.
- **Declarative**: Use Array methods (`map`, `filter`) over loops.
- **Naming**: Descriptive and consistent naming.

## 5. Development Workflows

### Adding New Screens
1.  **Route**: Create file in `app/`. Use `(modal)` group for modals.
2.  **Structure**: Wrap in `ScreenSurface` > `ScreenScrollView`.
3.  **Components**: Use `heroui-native` components.

### Adding New Components
1.  **Location**: `components/ui` for atoms, `components/` for molecules/organisms.
2.  **Props**: Always explicitly type props. Support `className`.
3.  **Icons**: Update `IconSymbol` mapping if introducing new icons.

## 6. Future Expansion Guidelines (Constants, Utils, Lib, API)

### Constants (`constants/`)
- Store strictly constant values (Config, Strings, Colors).
- Do not put logic here.

### Utilities (`utils/` or `lib/`)
- **Utils**: Pure functions, formatting helpers (currency, date).
- **Lib**: Third-party library wrappers or complex business logic configurations.

### API Layer
- Define clear interfaces for API responses.
- Use hooks (e.g., React Query) for data fetching to handle caching/loading states.